; generated by ARM C/C++ Compiler, 4.1 [Build 894]
; commandline ArmCC [--debug -c --asm -o..\Output\timer.o --depend=..\Output\timer.d --cpu=Cortex-M3 --apcs=interwork -O0 -I.\src -I.\inc -I..\CMSIS -I"E:\Keil 4 ARM\ARM\RV31\Inc" -I"E:\Keil 4 ARM\ARM\CMSIS\Include" -I"E:\Keil 4 ARM\ARM\Inc\ST\STM32F10x" -DSTM32F10X_CL --omf_browse=..\Output\timer.crf src\Timer.c]
        THUMB
        REQUIRE8
        PRESERVE8

        AREA ||.text||, CODE, READONLY, ALIGN=2

TIM1_UP_IRQHandler PROC
        PUSH     {r4,lr}
        LDR      r0,|L1.776|
        LDRH     r0,[r0,#0]
        MOV      r1,#0xfffe
        ANDS     r0,r0,r1
        LDR      r1,|L1.776|
        STRH     r0,[r1,#0]
        LDR      r0,|L1.780|
        LDRH     r1,[r0,#0]  ; cont1
        LDRH     r0,[r0,#0]  ; cont1
        ADDS     r0,r0,#1
        LDR      r2,|L1.780|
        STRH     r0,[r2,#0]
        CMP      r1,#0x1f4
        BLT      |L1.52|
        LDR      r0,|L1.784|
        LDR      r0,[r0,#0xc]
        EOR      r0,r0,#0x2000
        LDR      r1,|L1.784|
        STR      r0,[r1,#0xc]
        MOVS     r0,#0
        MOV      r1,r2
        STRH     r0,[r1,#0]
|L1.52|
        LDR      r0,|L1.788|
        LDRB     r0,[r0,#0]  ; Systimememb
        AND      r0,r0,#1
        CMP      r0,#1
        BNE      |L1.240|
        LDR      r0,|L1.792|
        LDRH     r0,[r0,#0]  ; ADSMstartcont
        SUBS     r0,r0,#1
        LDR      r1,|L1.792|
        STRH     r0,[r1,#0]
        MOV      r0,r1
        LDRH     r0,[r0,#0]  ; ADSMstartcont
        CMP      r0,#0x28
        BGT      |L1.240|
        MOV      r0,r1
        LDRH     r0,[r0,#0]  ; ADSMstartcont
        CBZ      r0,|L1.94|
        BL       ADS7953_SMstart
        B        |L1.240|
|L1.94|
        LDR      r0,|L1.796|
        LDR      r0,[r0,#0]  ; predata
        LDR      r1,|L1.800|
        LDR      r1,[r1,#0]  ; Samp_Databuff
        SUBS     r0,r0,r1
        CMP      r0,#0x3e8
        BCC      |L1.126|
        LDR      r0,|L1.800|
        LDR      r0,[r0,#0]  ; Samp_Databuff
        LDR      r1,|L1.796|
        LDR      r1,[r1,#0]  ; predata
        SUBS     r0,r0,r1
        CMP      r0,#0x3e8
        BCS      |L1.206|
|L1.126|
        LDR      r0,|L1.800|
        LDR      r0,[r0,#0]  ; Samp_Databuff
        MOVS     r1,#0x28
        UDIV     r0,r0,r1
        LDR      r1,|L1.800|
        LDR      r1,[r1,#0]  ; Samp_Databuff
        MOVS     r2,#0x28
        UDIV     r3,r1,r2
        MLS      r1,r2,r3,r1
        MOVS     r2,#0x14
        UDIV     r1,r1,r2
        ADD      r0,r0,r1
        LDR      r1,|L1.804|
        LDRB     r1,[r1,#1]  ; Samp_ADdata_Stream
        LDR      r2,|L1.808|
        ADD      r1,r2,r1,LSL #4
        STRH     r0,[r1,#4]
        LDR      r0,|L1.788|
        LDRB     r0,[r0,#0]  ; Systimememb
        AND      r0,r0,#0xfe
        LDR      r1,|L1.788|
        STRB     r0,[r1,#0]
        MOVS     r0,#0
        LDR      r1,|L1.792|
        STRH     r0,[r1,#0]
        LDR      r1,|L1.800|
        STR      r0,[r1,#0]  ; Samp_Databuff
        SUBS     r0,r0,#1
        LDR      r1,|L1.796|
        STR      r0,[r1,#0]  ; predata
        MOVS     r0,#0
        LDR      r1,|L1.812|
        STRB     r0,[r1,#0]
        B        |L1.240|
|L1.206|
        LDR      r0,|L1.800|
        LDR      r0,[r0,#0]  ; Samp_Databuff
        LDR      r1,|L1.796|
        STR      r0,[r1,#0]  ; predata
        MOVS     r0,#0x28
        LDR      r1,|L1.792|
        STRH     r0,[r1,#0]
        MOVS     r0,#0
        LDR      r1,|L1.800|
        STR      r0,[r1,#0]  ; Samp_Databuff
        LDR      r0,|L1.812|
        LDRB     r0,[r0,#0]  ; cont
        ADDS     r0,r0,#1
        LDR      r1,|L1.812|
        STRB     r0,[r1,#0]
        BL       ADS7953_SMstart
|L1.240|
        LDR      r0,|L1.788|
        LDRB     r0,[r0,#0]  ; Systimememb
        AND      r0,r0,#2
        CMP      r0,#2
        BNE      |L1.298|
        LDR      r0,|L1.816|
        LDRH     r1,[r0,#0]  ; COMMbreaktime
        LDRH     r0,[r0,#0]  ; COMMbreaktime
        SUBS     r0,r0,#1
        LDR      r2,|L1.816|
        STRH     r0,[r2,#0]
        CBNZ     r1,|L1.298|
        LDR      r0,|L1.804|
        LDRH     r0,[r0,#4]  ; Samp_ADdata_Stream
        ORR      r0,r0,#1
        LDR      r1,|L1.804|
        STRH     r0,[r1,#4]
        LDR      r0,|L1.788|
        LDRB     r0,[r0,#0]  ; Systimememb
        AND      r0,r0,#0xfd
        LDR      r1,|L1.788|
        STRB     r0,[r1,#0]
        MOV      r0,#0x1388
        MOV      r1,r2
        STRH     r0,[r1,#0]
|L1.298|
        LDR      r0,|L1.820|
        LDRB     r0,[r0,#0]  ; RXtimememb
        CBZ      r0,|L1.318|
        CMP      r0,#1
        BEQ      |L1.396|
        CMP      r0,#2
        BEQ      |L1.320|
        CMP      r0,#3
        BNE      |L1.568|
        B        |L1.504|
|L1.318|
        B        |L1.578|
|L1.320|
        LDR      r0,|L1.824|
        LDRB     r0,[r0,#0]  ; U1_RXfin
        TST      r0,#3
        BNE      |L1.394|
        LDR      r0,|L1.828|
        LDRH     r1,[r0,#0]  ; U1_RXresettime
        LDRH     r0,[r0,#0]  ; U1_RXresettime
        SUBS     r0,r0,#1
        LDR      r2,|L1.828|
        STRH     r0,[r2,#0]
        CBNZ     r1,|L1.394|
        LDR      r0,|L1.832|
        LDRH     r0,[r0,#0]
        TST      r0,#0x20
        BNE      |L1.380|
        LDR      r0,|L1.824|
        LDRB     r0,[r0,#0]  ; U1_RXfin
        ORR      r0,r0,#1
        LDR      r1,|L1.824|
        STRB     r0,[r1,#0]
        MOVS     r0,#5
        MOV      r1,r2
        STRH     r0,[r1,#0]
        MOVS     r0,#1
        LDR      r1,|L1.820|
        STRB     r0,[r1,#0]
        B        |L1.394|
|L1.380|
        MOV      r0,#0xffff
        LDR      r1,|L1.828|
        STRH     r0,[r1,#0]
        MOVS     r0,#0
        LDR      r1,|L1.820|
        STRB     r0,[r1,#0]
|L1.394|
        POP      {r4,pc}
|L1.396|
        LDR      r0,|L1.824|
        LDRB     r0,[r0,#0]  ; U1_RXfin
        AND      r0,r0,#3
        CMP      r0,#1
        BNE      |L1.502|
        LDR      r0,|L1.828|
        LDRH     r1,[r0,#0]  ; U1_RXresettime
        LDRH     r0,[r0,#0]  ; U1_RXresettime
        SUBS     r0,r0,#1
        LDR      r2,|L1.828|
        STRH     r0,[r2,#0]
        CBNZ     r1,|L1.486|
        LDR      r0,|L1.832|
        LDRH     r0,[r0,#0]
        TST      r0,#0x20
        BNE      |L1.488|
        LDR      r0,|L1.824|
        LDRB     r0,[r0,#0]  ; U1_RXfin
        ORR      r0,r0,#2
        LDR      r1,|L1.824|
        STRB     r0,[r1,#0]
        MOVS     r0,#0
        LDR      r1,|L1.820|
        STRB     r0,[r1,#0]
        MOV      r0,#0xffff
        MOV      r1,r2
        STRH     r0,[r1,#0]
        LDR      r0,|L1.832|
        ADDS     r0,r0,#0xc
        LDRH     r0,[r0,#0]
        BIC      r0,r0,#4
        LDR      r1,|L1.832|
        ADDS     r1,r1,#0xc
        STRH     r0,[r1,#0]
        LDR      r0,|L1.832|
        LDRH     r0,[r0,#0]
        BIC      r0,r0,#0x20
        LDR      r1,|L1.832|
        STRH     r0,[r1,#0]
|L1.486|
        B        |L1.502|
|L1.488|
        MOVS     r0,#0
        LDR      r1,|L1.820|
        STRB     r0,[r1,#0]
        MOV      r0,#0xffff
        LDR      r1,|L1.828|
        STRH     r0,[r1,#0]
|L1.502|
        B        |L1.394|
|L1.504|
        LDR      r0,|L1.824|
        LDRB     r0,[r0,#0]  ; U1_RXfin
        TST      r0,#3
        BNE      |L1.574|
        LDR      r0,|L1.828|
        LDRH     r1,[r0,#0]  ; U1_RXresettime
        LDRH     r0,[r0,#0]  ; U1_RXresettime
        SUBS     r0,r0,#1
        LDR      r2,|L1.828|
        STRH     r0,[r2,#0]
        CBNZ     r1,|L1.574|
        LDR      r0,|L1.820|
        LDRB     r0,[r0,#0]  ; RXtimememb
        AND      r0,r0,#0xfc
        LDR      r1,|L1.820|
        STRB     r0,[r1,#0]
        MOVS     r0,#2
        LDR      r1,|L1.824|
        STRB     r0,[r1,#0]
        LDR      r0,|L1.832|
        ADDS     r0,r0,#0xc
        LDRH     r0,[r0,#0]
        ORR      r0,r0,#4
        LDR      r1,|L1.832|
        ADDS     r1,r1,#0xc
        STRH     r0,[r1,#0]
        MOV      r0,#0xffff
        B        |L1.570|
|L1.568|
        B        |L1.576|
|L1.570|
        MOV      r1,r2
        STRH     r0,[r1,#0]
|L1.574|
        B        |L1.394|
|L1.576|
        NOP      
|L1.578|
        NOP      
        LDR      r0,|L1.836|
        LDRB     r0,[r0,#0]  ; TXtimememb
        CBZ      r0,|L1.596|
        CMP      r0,#1
        BEQ      |L1.598|
        CMP      r0,#2
        BNE      |L1.702|
        B        |L1.650|
|L1.596|
        B        |L1.704|
|L1.598|
        LDR      r0,|L1.840|
        LDRB     r0,[r0,#0]  ; U1_TXfin
        AND      r0,r0,#3
        CMP      r0,#1
        BNE      |L1.648|
        LDR      r0,|L1.844|
        LDRH     r1,[r0,#0]  ; U1_TXresettime
        LDRH     r0,[r0,#0]  ; U1_TXresettime
        SUBS     r0,r0,#1
        LDR      r2,|L1.844|
        STRH     r0,[r2,#0]
        CBNZ     r1,|L1.648|
        MOVS     r0,#0
        LDR      r1,|L1.836|
        STRB     r0,[r1,#0]
        LDR      r0,|L1.840|
        LDRB     r0,[r0,#0]  ; U1_TXfin
        ORR      r0,r0,#2
        LDR      r1,|L1.840|
        STRB     r0,[r1,#0]
        MOVS     r0,#0x32
        MOV      r1,r2
        STRH     r0,[r1,#0]
|L1.648|
        B        |L1.394|
|L1.650|
        LDR      r0,|L1.840|
        LDRB     r0,[r0,#0]  ; U1_TXfin
        AND      r0,r0,#3
        CMP      r0,#1
        BNE      |L1.700|
        LDR      r0,|L1.844|
        LDRH     r1,[r0,#0]  ; U1_TXresettime
        LDRH     r0,[r0,#0]  ; U1_TXresettime
        SUBS     r0,r0,#1
        LDR      r2,|L1.844|
        STRH     r0,[r2,#0]
        CBNZ     r1,|L1.700|
        MOVS     r0,#0
        LDR      r1,|L1.836|
        STRB     r0,[r1,#0]
        LDR      r0,|L1.840|
        LDRB     r0,[r0,#0]  ; U1_TXfin
        ORR      r0,r0,#8
        LDR      r1,|L1.840|
        STRB     r0,[r1,#0]
        MOVS     r0,#0xa
        MOV      r1,r2
        STRH     r0,[r1,#0]
|L1.700|
        B        |L1.394|
|L1.702|
        NOP      
|L1.704|
        NOP      
        NOP      
        B        |L1.394|
        ENDP

Timer1_Init PROC
        LDR      r0,|L1.848|
        LDR      r0,[r0,#0x18]
        ORR      r0,r0,#0x800
        LDR      r1,|L1.848|
        STR      r0,[r1,#0x18]
        LDR      r0,|L1.852|
        LDR      r0,[r0,#4]
        ORR      r0,r0,#0x400
        LDR      r1,|L1.852|
        STR      r0,[r1,#4]
        MOV      r0,#0x2d0
        LDR      r1,|L1.776|
        ADDS     r1,r1,#0x1c
        STRH     r0,[r1,#0]
        MOVS     r0,#0xa
        SUBS     r1,r1,#4
        STRH     r0,[r1,#0]
        LDR      r1,|L1.776|
        ADDS     r1,r1,#0x20
        STRH     r0,[r1,#0]
        MOVS     r0,#1
        LDR      r1,|L1.776|
        SUBS     r1,r1,#4
        STRH     r0,[r1,#0]
        MOVS     r0,#0x91
        LDR      r1,|L1.776|
        SUBS     r1,r1,#0x10
        STRH     r0,[r1,#0]
        BX       lr
        ENDP

        DCW      0x0000
|L1.776|
        DCD      0x40012c10
|L1.780|
        DCD      cont1
|L1.784|
        DCD      0x40011000
|L1.788|
        DCD      Systimememb
|L1.792|
        DCD      ADSMstartcont
|L1.796|
        DCD      predata
|L1.800|
        DCD      Samp_Databuff
|L1.804|
        DCD      Samp_ADdata_Stream
|L1.808|
        DCD      Samp_DataArr
|L1.812|
        DCD      cont
|L1.816|
        DCD      COMMbreaktime
|L1.820|
        DCD      RXtimememb
|L1.824|
        DCD      U1_RXfin
|L1.828|
        DCD      U1_RXresettime
|L1.832|
        DCD      0x40013800
|L1.836|
        DCD      TXtimememb
|L1.840|
        DCD      U1_TXfin
|L1.844|
        DCD      U1_TXresettime
|L1.848|
        DCD      0x40021000
|L1.852|
        DCD      0xe0042000

        AREA ||.arm_vfe_header||, DATA, READONLY, NOALLOC, ALIGN=2

        DCD      0x00000000

        AREA ||.data||, DATA, ALIGN=2

RXtimememb
        DCB      0x00
TXtimememb
        DCB      0x00
Systimememb
        DCB      0x00,0x00
U1_RXresettime
        DCW      0xffff
U1_TXresettime
        DCW      0xffff
ADSMstartcont
        DCW      0x0028
COMMbreaktime
        DCW      0x1388
predata
        DCD      0xffffffff
cont
        DCB      0x00,0x00
cont1
        DCB      0x00,0x00

        EXPORT TIM1_UP_IRQHandler [CODE]
        EXPORT Timer1_Init [CODE]
        EXPORT RXtimememb [DATA,SIZE=1]
        EXPORT TXtimememb [DATA,SIZE=1]
        EXPORT Systimememb [DATA,SIZE=1]
        EXPORT U1_RXresettime [DATA,SIZE=2]
        EXPORT U1_TXresettime [DATA,SIZE=2]
        EXPORT ADSMstartcont [DATA,SIZE=2]
        EXPORT COMMbreaktime [DATA,SIZE=2]

        IMPORT ||Lib$$Request$$armlib|| [CODE,WEAK]
        IMPORT ADS7953_SMstart [CODE]
        IMPORT Samp_Databuff [DATA]
        IMPORT Samp_ADdata_Stream [DATA]
        IMPORT Samp_DataArr [DATA]
        IMPORT U1_RXfin [DATA]
        IMPORT U1_TXfin [DATA]

        KEEP predata
        KEEP cont
        KEEP cont1

        ATTR FILESCOPE
        ATTR SETVALUE Tag_ABI_PCS_wchar_t,2
        ATTR SETVALUE Tag_ABI_enum_size,1
        ATTR SETVALUE Tag_ABI_optimization_goals,6
        ATTR SETSTRING Tag_conformance,"2.06"
        ATTR SETVALUE AV,18,1

        ASSERT {ENDIAN} = "little"
        ASSERT {INTER} = {TRUE}
        ASSERT {ROPI} = {FALSE}
        ASSERT {RWPI} = {FALSE}
        ASSERT {IEEE_FULL} = {FALSE}
        ASSERT {IEEE_PART} = {FALSE}
        ASSERT {IEEE_JAVA} = {FALSE}
        END
