; generated by ARM C/C++ Compiler, 4.1 [Build 894]
; commandline ArmCC [--debug -c --asm -o..\Output\data_pro.o --depend=..\Output\data_pro.d --cpu=Cortex-M3 --apcs=interwork -O0 -I.\src -I.\inc -I..\CMSIS -I"E:\Keil 4 ARM\ARM\RV31\Inc" -I"E:\Keil 4 ARM\ARM\CMSIS\Include" -I"E:\Keil 4 ARM\ARM\Inc\ST\STM32F10x" -DSTM32F10X_CL --omf_browse=..\Output\data_pro.crf src\DATA_pro.c]
        THUMB
        REQUIRE8
        PRESERVE8

        AREA ||.text||, CODE, READONLY, ALIGN=2

bigenddata_copy PROC
        MOV      r3,r0
        B        |L1.22|
|L1.4|
        LDRB     r0,[r3],#1
        STRB     r0,[r1,#1]
        LDRB     r0,[r3],#1
        STRB     r0,[r1,#0]
        ADDS     r1,r1,#2
        SUBS     r0,r2,#2
        UXTB     r2,r0
|L1.22|
        CMP      r2,#0
        BNE      |L1.4|
        MOV      r0,r1
        BX       lr
        ENDP

TXdata_proc PROC
        PUSH     {r4-r6,lr}
        MOV      r4,r0
        MOV      r6,r1
        LDR      r0,|L1.1032|
        LDRB     r0,[r0,#0]  ; Head_Data
        STRB     r0,[r4,#5]
        CMP      r0,#3
        BEQ      |L1.52|
        CMP      r0,#0x10
        BNE      |L1.152|
        B        |L1.104|
|L1.52|
        LDR      r0,|L1.1032|
        LDRH     r0,[r0,#6]  ; Head_Data
        LSLS     r0,r0,#25
        LSRS     r1,r0,#24
        STRB     r1,[r4,#6]
        LDR      r0,|L1.1032|
        LDRH     r0,[r0,#6]  ; Head_Data
        LSLS     r0,r0,#25
        LSRS     r2,r0,#24
        ADDS     r1,r4,#7
        MOV      r0,r6
        BL       bigenddata_copy
        MOV      r5,r0
        LDR      r0,|L1.1032|
        LDRH     r0,[r0,#6]  ; Head_Data
        MOVS     r2,#2
        ADD      r0,r2,r0,LSL #1
        ADDS     r0,r0,#5
        UXTB     r1,r0
        MOV      r0,r4
        BL       CRC16_CAL
        STRH     r0,[r5,#0]
        B        |L1.172|
|L1.104|
        LDR      r0,|L1.1032|
        LDRH     r0,[r0,#4]  ; Head_Data
        LSLS     r0,r0,#8
        LDR      r1,|L1.1032|
        LDRH     r1,[r1,#4]  ; Head_Data
        ORR      r0,r0,r1,ASR #8
        STRB     r0,[r4,#6]
        LDR      r0,|L1.1032|
        LDRH     r0,[r0,#6]  ; Head_Data
        LSLS     r0,r0,#8
        LDR      r1,|L1.1032|
        LDRH     r1,[r1,#6]  ; Head_Data
        ORR      r0,r0,r1,ASR #8
        STRB     r0,[r4,#8]
        ADD      r5,r4,#0xa
        MOVS     r1,#0xa
        MOV      r0,r4
        BL       CRC16_CAL
        STRH     r0,[r5,#0]
        B        |L1.172|
|L1.152|
        LDR      r0,|L1.1032|
        LDRB     r1,[r0,#1]  ; Head_Data
        STRB     r1,[r4,#6]
        ADDS     r5,r4,#7
        MOVS     r1,#7
        MOV      r0,r4
        BL       CRC16_CAL
        STRH     r0,[r5,#0]
        NOP      
|L1.172|
        NOP      
        SUBS     r0,r5,r4
        ADDS     r0,r0,#2
        UXTH     r0,r0
        POP      {r4-r6,pc}
        ENDP

limitdatapro PROC
        PUSH     {r4,lr}
        MOV      r3,r0
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        STRH     r0,[r1,#6]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        STRH     r0,[r1,#8]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        STRH     r0,[r1,#0x16]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        STRH     r0,[r1,#0x18]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        UXTH     r4,r0
        MOVS     r0,#0x76
        STRH     r4,[r0,r1]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        UXTH     r4,r0
        MOVS     r0,#0x78
        STRH     r4,[r0,r1]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        UXTH     r4,r0
        MOVS     r0,#0x86
        STRH     r4,[r0,r1]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        UXTH     r4,r0
        MOVS     r0,#0x88
        STRH     r4,[r0,r1]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        STRH     r0,[r1,#0x36]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        UXTH     r4,r0
        MOVS     r0,#0x66
        STRH     r4,[r0,r1]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        UXTH     r4,r0
        MOVS     r0,#0xd8
        STRH     r4,[r0,r1]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        UXTH     r4,r0
        MOVS     r0,#0xe8
        STRH     r4,[r0,r1]
        ADDS     r3,r3,#2
        LDRH     r0,[r3,#0]
        LSLS     r0,r0,#8
        LDRH     r4,[r3,#0]
        ORR      r0,r0,r4,ASR #8
        UXTH     r0,r0
        LDR      r4,|L1.1036|
        MULS     r0,r4,r0
        MOVS     r4,#0xa
        SDIV     r0,r0,r4
        STR      r0,[r2,#0xc]
        MOVS     r0,#0
        POP      {r4,pc}
        ENDP

caldatapro PROC
        PUSH     {r3-r7,lr}
        MOV      r4,r0
        MOV      r6,r1
        MOV      r5,r2
        LDRH     r0,[r5,#0x12]
        TST      r0,#0xf
        BNE      |L1.596|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        LSLS     r0,r0,#16
        LSRS     r0,r0,#16
        BEQ      |L1.582|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        CMP      r0,#0x7d0
        BLT      |L1.578|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        CMP      r0,#0x1f40
        BGT      |L1.578|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        MOV      r1,#0x1f4
        SDIV     r2,r0,r1
        MLS      r0,r1,r2,r0
        CBNZ     r0,|L1.578|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        MOV      r1,#0x1f4
        SDIV     r0,r0,r1
        SUBS     r0,r0,#4
        LDRB     r1,[r5,#0x10]
        CMP      r0,r1
        BGE      |L1.556|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        MOV      r1,#0x1f4
        SDIV     r0,r0,r1
        SUBS     r0,r0,#4
        STRB     r0,[r5,#0x10]
|L1.556|
        LDRH     r0,[r5,#0x12]
        ORR      r0,r0,#5
        STRH     r0,[r5,#0x12]
        LDR      r0,|L1.1040|
        LDRB     r0,[r0,#0]  ; cal_flag
        ORR      r0,r0,#1
        LDR      r1,|L1.1040|
        STRB     r0,[r1,#0]
        B        |L1.582|
|L1.578|
        MOVS     r0,#1
|L1.580|
        POP      {r3-r7,pc}
|L1.582|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        STRH     r0,[r5,#0x14]
        B        |L1.618|
|L1.596|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        LDRH     r1,[r5,#0x14]
        CMP      r0,r1
        BEQ      |L1.618|
        MOVS     r0,#1
        B        |L1.580|
|L1.618|
        ADDS     r4,r4,#2
        LDRH     r0,[r5,#0x12]
        TST      r0,#0xf0
        BNE      |L1.798|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        LSLS     r0,r0,#16
        LSRS     r0,r0,#16
        BEQ      |L1.784|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        CMP      r0,#0x7d0
        BLT      |L1.780|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        CMP      r0,#0x1f40
        BGT      |L1.780|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        MOV      r1,#0x1f4
        SDIV     r2,r0,r1
        MLS      r0,r1,r2,r0
        CBNZ     r0,|L1.780|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        MOV      r1,#0x1f4
        SDIV     r0,r0,r1
        SUBS     r0,r0,#4
        LDRB     r1,[r5,#0x10]
        CMP      r0,r1
        BGE      |L1.758|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        MOV      r1,#0x1f4
        SDIV     r0,r0,r1
        SUBS     r0,r0,#4
        STRB     r0,[r5,#0x10]
|L1.758|
        LDRH     r0,[r5,#0x12]
        ORR      r0,r0,#0x50
        STRH     r0,[r5,#0x12]
        LDR      r0,|L1.1040|
        LDRB     r0,[r0,#0]  ; cal_flag
        ORR      r0,r0,#1
        LDR      r1,|L1.1040|
        STRB     r0,[r1,#0]
        B        |L1.784|
|L1.780|
        MOVS     r0,#1
        B        |L1.580|
|L1.784|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        STRH     r0,[r5,#0x16]
        B        |L1.820|
|L1.798|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        LDRH     r1,[r5,#0x16]
        CMP      r0,r1
        BEQ      |L1.820|
        MOVS     r0,#1
        B        |L1.580|
|L1.820|
        ADDS     r4,r4,#2
        LDRH     r0,[r5,#0x12]
        TST      r0,#0xf00
        BNE      |L1.1010|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        LSLS     r0,r0,#16
        LSRS     r0,r0,#16
        BEQ      |L1.996|
        LDRH     r0,[r4,#0]
        LSL      r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        LSLS     r0,r0,#16
        LSRS     r0,r0,#16
        BMI      |L1.992|
        LDR      r0,[r5,#0xc]
        ADD      r0,r0,r0,LSL #2
        LSLS     r0,r0,#1
        LDR      r1,|L1.1044|
        UDIV     r0,r0,r1
        LDRH     r1,[r4,#0]
        LSLS     r1,r1,#8
        LDRH     r2,[r4,#0]
        ORR      r1,r1,r2,ASR #8
        UXTH     r1,r1
        CMP      r0,r1
        BCC      |L1.992|
        LDR      r1,|L1.1044|
        LDR      r0,[r5,#0xc]
        UDIV     r0,r0,r1
        LDRH     r1,[r4,#0]
        LSLS     r1,r1,#8
        LDRH     r2,[r4,#0]
        ORR      r1,r1,r2,ASR #8
        UXTH     r1,r1
        UDIV     r2,r1,r0
        MLS      r0,r0,r2,r1
        CBNZ     r0,|L1.992|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        MOVS     r1,#0x96
        SDIV     r0,r0,r1
        MOV      r1,r0
        LDRB     r0,[r5,#0x11]
        CMP      r1,r0
        BGE      |L1.970|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        MOVS     r1,#0x96
        SDIV     r0,r0,r1
        STRB     r0,[r5,#0x11]
|L1.970|
        LDRH     r0,[r5,#0x12]
        ORR      r0,r0,#0x500
        STRH     r0,[r5,#0x12]
        LDR      r0,|L1.1040|
        LDRB     r0,[r0,#0]  ; cal_flag
        ORR      r0,r0,#1
        LDR      r1,|L1.1040|
        STRB     r0,[r1,#0]
        B        |L1.996|
|L1.992|
        MOVS     r0,#1
        B        |L1.580|
|L1.996|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        STRH     r0,[r5,#0x18]
        B        |L1.1048|
|L1.1010|
        LDRH     r0,[r4,#0]
        LSLS     r0,r0,#8
        LDRH     r1,[r4,#0]
        ORR      r0,r0,r1,ASR #8
        UXTH     r0,r0
        LDRH     r1,[r5,#0x18]
        CMP      r0,r1
        BEQ      |L1.1048|
        MOVS     r0,#1
        B        |L1.580|
|L1.1032|
        DCD      Head_Data
|L1.1036|
        DCD      0x000f4240
|L1.1040|
        DCD      cal_flag
|L1.1044|
        DCD      0x000186a0
|L1.1048|
        LDRH     r0,[r5,#0x12]
        LDRH     r1,[r5,#0x14]
        ORRS     r0,r0,r1
        LDRH     r1,[r5,#0x16]
        ORRS     r0,r0,r1
        LDRH     r1,[r5,#0x18]
        ORRS     r0,r0,r1
        BNE      |L1.1108|
        LDR      r0,|L1.1956|
        LDRB     r0,[r0,#0]  ; cal_flag
        CMP      r0,#1
        BNE      |L1.1108|
        MOVS     r0,#2
        MOVS     r3,#0x4e
        LDR      r2,|L1.1960|
        ADD      r1,r5,#0x10
        STR      r0,[sp,#0]
        MOV      r0,r6
        BL       Flash_Pagedata_Write
        CBZ      r0,|L1.1096|
        MOVS     r0,#1
        B        |L1.580|
|L1.1096|
        LDR      r0,|L1.1956|
        LDRB     r0,[r0,#0]  ; cal_flag
        AND      r0,r0,#0xfe
        LDR      r1,|L1.1956|
        STRB     r0,[r1,#0]
|L1.1108|
        MOVS     r0,#0
        B        |L1.580|
        ENDP

cmddatapro PROC
        PUSH     {r4,lr}
        MOV      r2,r0
        LDRH     r0,[r2,#0]
        LDRH     r3,[r2,#2]
        CMP      r0,r3
        BNE      |L1.1138|
        LDRH     r0,[r2,#0]
        LSLS     r0,r0,#8
        LDRH     r3,[r2,#0]
        ORR      r0,r0,r3,ASR #8
        STRH     r0,[r1,#2]
        B        |L1.1166|
|L1.1138|
        LDR      r0,|L1.1964|
        LDRB     r3,[r0,#0]  ; errornum
        LDRB     r0,[r0,#0]  ; errornum
        ADDS     r0,r0,#1
        LDR      r4,|L1.1964|
        STRB     r0,[r4,#0]
        CMP      r3,#5
        BLE      |L1.1162|
        MOVS     r0,#0
        STRH     r0,[r1,#2]
        MOVS     r0,#1
|L1.1160|
        POP      {r4,pc}
|L1.1162|
        MOVS     r0,#1
        B        |L1.1160|
|L1.1166|
        MOVS     r0,#0
        B        |L1.1160|
        ENDP

RXdata_proc PROC
        PUSH     {r4-r8,lr}
        MOV      r4,r0
        MOV      r8,r1
        MOV      r5,r2
        MOV      r6,r3
        MOVS     r7,#0
        LDR      r0,|L1.1968|
        LDRB     r0,[r0,#0]  ; Head_Data
        CMP      r0,#0x10
        BNE      |L1.1314|
        ADDS     r4,r4,#6
        LDR      r0,|L1.1968|
        LDRH     r0,[r0,#4]  ; Head_Data
        CBZ      r0,|L1.1214|
        CMP      r0,#2
        BEQ      |L1.1238|
        CMP      r0,#0xf
        BEQ      |L1.1264|
        CMP      r0,#0x12
        BNE      |L1.1292|
        B        |L1.1290|
|L1.1214|
        LDR      r0,|L1.1968|
        LDRH     r0,[r0,#6]  ; Head_Data
        CMP      r0,#2
        BNE      |L1.1234|
        MOV      r1,r5
        MOV      r0,r4
        BL       cmddatapro
        MOV      r7,r0
        B        |L1.1236|
|L1.1234|
        MOVS     r7,#1
|L1.1236|
        B        |L1.1294|
|L1.1238|
        LDR      r0,|L1.1968|
        LDRH     r0,[r0,#6]  ; Head_Data
        CMP      r0,#0xd
        BNE      |L1.1260|
        MOV      r2,r5
        MOV      r1,r8
        MOV      r0,r4
        BL       limitdatapro
        MOV      r7,r0
        B        |L1.1262|
|L1.1260|
        MOVS     r7,#1
|L1.1262|
        B        |L1.1294|
|L1.1264|
        LDR      r0,|L1.1968|
        LDRH     r0,[r0,#6]  ; Head_Data
        CMP      r0,#3
        BNE      |L1.1286|
        MOV      r2,r5
        MOV      r1,r6
        MOV      r0,r4
        BL       caldatapro
        MOV      r7,r0
        B        |L1.1288|
|L1.1286|
        MOVS     r7,#1
|L1.1288|
        B        |L1.1294|
|L1.1290|
        B        |L1.1294|
|L1.1292|
        NOP      
|L1.1294|
        NOP      
        CBZ      r7,|L1.1314|
        LDR      r0,|L1.1968|
        LDRB     r0,[r0,#0]  ; Head_Data
        ORR      r0,r0,#0x80
        LDR      r1,|L1.1968|
        STRB     r0,[r1,#0]
        MOVS     r0,#6
        STRB     r0,[r1,#1]
|L1.1314|
        MOV      r0,r7
        POP      {r4-r8,pc}
        ENDP

RXdata_confirm PROC
        PUSH     {r4-r6,lr}
        MOV      r4,r0
        MOV      r5,r1
        LDRB     r0,[r4,#5]
        LDR      r1,|L1.1968|
        STRB     r0,[r1,#0]
        LDR      r0,|L1.1972|
        LDRB     r0,[r0,#0]  ; U1_RXfin
        TST      r0,#0x80
        BEQ      |L1.1360|
        MOV      r0,r1
        LDRB     r0,[r0,#0]  ; Head_Data
        ORR      r0,r0,#0x80
        STRB     r0,[r1,#0]
        MOVS     r0,#7
        STRB     r0,[r1,#1]
        MOVS     r0,#5
|L1.1358|
        POP      {r4-r6,pc}
|L1.1360|
        CMP      r5,#5
        BGE      |L1.1368|
        MOVS     r0,#6
        B        |L1.1358|
|L1.1368|
        SUBS     r0,r5,#2
        UXTB     r1,r0
        MOV      r0,r4
        BL       CRC16_CAL
        ADDS     r1,r4,r5
        LDRH     r1,[r1,#-2]
        CMP      r0,r1
        BEQ      |L1.1408|
        LDR      r0,|L1.1968|
        LDRB     r0,[r0,#0]  ; Head_Data
        ORR      r0,r0,#0x80
        LDR      r1,|L1.1968|
        STRB     r0,[r1,#0]
        MOVS     r0,#5
        STRB     r0,[r1,#1]
        MOVS     r0,#1
        B        |L1.1358|
|L1.1408|
        LDR      r0,|L1.1968|
        LDRB     r0,[r0,#0]  ; Head_Data
        CMP      r0,#3
        BEQ      |L1.1422|
        CMP      r0,#0x10
        BNE      |L1.1672|
        B        |L1.1542|
|L1.1422|
        LDRH     r0,[r4,#6]
        LDR      r1,|L1.1968|
        STRH     r0,[r1,#4]
        LDRH     r0,[r4,#8]
        STRH     r0,[r1,#6]
        MOV      r0,r1
        LDRH     r0,[r0,#4]  ; Head_Data
        LSLS     r0,r0,#8
        LDRH     r1,[r1,#4]  ; Head_Data
        ORR      r0,r0,r1,ASR #8
        LDR      r1,|L1.1968|
        STRH     r0,[r1,#4]
        MOV      r0,r1
        LDRH     r0,[r0,#6]  ; Head_Data
        LSLS     r0,r0,#8
        LDRH     r1,[r1,#6]  ; Head_Data
        ORR      r0,r0,r1,ASR #8
        LDR      r1,|L1.1968|
        STRH     r0,[r1,#6]
        MOV      r0,r1
        LDRH     r0,[r0,#6]  ; Head_Data
        CMP      r0,#1
        BLT      |L1.1480|
        MOV      r0,r1
        LDRH     r0,[r0,#6]  ; Head_Data
        CMP      r0,#0x7d
        BLE      |L1.1498|
|L1.1480|
        LDR      r0,|L1.1968|
        LDRB     r0,[r0,#0]  ; Head_Data
        ORR      r0,r0,#0x80
        LDR      r1,|L1.1968|
        STRB     r0,[r1,#0]
        MOVS     r0,#3
        STRB     r0,[r1,#1]
        B        |L1.1358|
|L1.1498|
        LDR      r0,|L1.1968|
        LDRH     r0,[r0,#4]  ; Head_Data
        CMP      r0,#0x20
        BLT      |L1.1520|
        LDR      r0,|L1.1968|
        LDRH     r0,[r0,#4]  ; Head_Data
        LDR      r1,|L1.1968|
        LDRH     r1,[r1,#6]  ; Head_Data
        ADD      r0,r0,r1
        CMP      r0,#0x34
        BLE      |L1.1540|
|L1.1520|
        LDR      r0,|L1.1968|
        LDRB     r0,[r0,#0]  ; Head_Data
        ORR      r0,r0,#0x80
        LDR      r1,|L1.1968|
        STRB     r0,[r1,#0]
        MOVS     r0,#2
        STRB     r0,[r1,#1]
        MOVS     r0,#4
        B        |L1.1358|
|L1.1540|
        B        |L1.1702|
|L1.1542|
        LDRH     r0,[r4,#6]
        LDR      r1,|L1.1968|
        STRH     r0,[r1,#4]
        LDRH     r0,[r4,#8]
        STRH     r0,[r1,#6]
        LDRB     r0,[r4,#0xa]
        STRB     r0,[r1,#2]
        MOV      r0,r1
        LDRH     r0,[r0,#4]  ; Head_Data
        LSLS     r0,r0,#8
        LDRH     r1,[r1,#4]  ; Head_Data
        ORR      r0,r0,r1,ASR #8
        LDR      r1,|L1.1968|
        STRH     r0,[r1,#4]
        MOV      r0,r1
        LDRH     r0,[r0,#6]  ; Head_Data
        LSLS     r0,r0,#8
        LDRH     r1,[r1,#6]  ; Head_Data
        ORR      r0,r0,r1,ASR #8
        LDR      r1,|L1.1968|
        STRH     r0,[r1,#6]
        MOV      r0,r1
        LDRH     r0,[r0,#6]  ; Head_Data
        CMP      r0,#1
        BLT      |L1.1616|
        MOV      r0,r1
        LDRH     r0,[r0,#6]  ; Head_Data
        CMP      r0,#0x7b
        BGT      |L1.1616|
        MOV      r0,r1
        LDRB     r1,[r0,#2]  ; Head_Data
        LDRH     r0,[r0,#6]  ; Head_Data
        CMP      r1,r0,LSL #1
        BEQ      |L1.1634|
|L1.1616|
        LDR      r0,|L1.1968|
        LDRB     r0,[r0,#0]  ; Head_Data
        ORR      r0,r0,#0x80
        LDR      r1,|L1.1968|
        STRB     r0,[r1,#0]
        MOVS     r0,#3
        STRB     r0,[r1,#1]
        B        |L1.1358|
|L1.1634|
        LDR      r0,|L1.1968|
        LDRH     r0,[r0,#4]  ; Head_Data
        CMP      r0,#0
        BLT      |L1.1656|
        LDR      r0,|L1.1968|
        LDRH     r0,[r0,#4]  ; Head_Data
        LDR      r1,|L1.1968|
        LDRH     r1,[r1,#6]  ; Head_Data
        ADD      r0,r0,r1
        CMP      r0,#0x13
        BLE      |L1.1680|
|L1.1656|
        LDR      r0,|L1.1968|
        LDRB     r0,[r0,#0]  ; Head_Data
        ORR      r0,r0,#0x80
        LDR      r1,|L1.1968|
        STRB     r0,[r1,#0]
        MOVS     r0,#2
        B        |L1.1674|
|L1.1672|
        B        |L1.1682|
|L1.1674|
        STRB     r0,[r1,#1]
        MOVS     r0,#4
        B        |L1.1358|
|L1.1680|
        B        |L1.1702|
|L1.1682|
        LDR      r0,|L1.1968|
        LDRB     r0,[r0,#0]  ; Head_Data
        ORR      r0,r0,#0x80
        LDR      r1,|L1.1968|
        STRB     r0,[r1,#0]
        MOVS     r0,#1
        STRB     r0,[r1,#1]
        MOVS     r0,#2
        B        |L1.1358|
|L1.1702|
        NOP      
        MOVS     r0,#0
        B        |L1.1358|
        ENDP

DATA_RecProc PROC
        PUSH     {r4-r8,lr}
        MOV      r5,r0
        MOV      r6,r1
        MOV      r4,r2
        MOV      r7,r3
        LDR      r8,[sp,#0x18]
        LDRH     r1,[r6,#0]
        MOV      r0,r5
        BL       RXdata_confirm
        CMP      r0,#6
        BEQ      |L1.1848|
        MOV      r0,#0x1388
        LDR      r1,|L1.1976|
        STRH     r0,[r1,#0]
        LDR      r0,|L1.1980|
        LDRH     r0,[r0,#0]
        MOV      r1,#0xfffe
        ANDS     r0,r0,r1
        LDR      r1,|L1.1980|
        STRH     r0,[r1,#0]
        LDR      r0,|L1.1984|
        LDRB     r0,[r0,#0]  ; Systimememb
        AND      r0,r0,#0xfd
        LDR      r1,|L1.1984|
        STRB     r0,[r1,#0]
        LDR      r0,|L1.1980|
        LDRH     r0,[r0,#0]
        ORR      r0,r0,#1
        LDR      r1,|L1.1980|
        STRH     r0,[r1,#0]
        LDRH     r0,[r4,#4]
        MOV      r1,#0xfffe
        ANDS     r0,r0,r1
        STRH     r0,[r4,#4]
        MOV      r3,r8
        MOV      r2,r4
        MOV      r1,r7
        ADDS     r0,r5,#5
        BL       RXdata_proc
        MOVS     r0,#2
        LDR      r1,|L1.1972|
        STRB     r0,[r1,#0]
        LDR      r0,|L1.1988|
        LDRB     r0,[r0,#0]  ; U1_TXfin
        ORR      r0,r0,#1
        LDR      r1,|L1.1988|
        STRB     r0,[r1,#0]
        MOVS     r0,#0xa
        LDR      r1,|L1.1992|
        STRH     r0,[r1,#0]
        MOVS     r0,#2
        LDR      r1,|L1.1996|
        STRB     r0,[r1,#0]
        LDR      r0,|L1.2000|
        LDRH     r0,[r0,#0]
        ORR      r0,r0,#8
        LDR      r1,|L1.2000|
        STRH     r0,[r1,#0]
        B        |L1.1872|
|L1.1848|
        MOVS     r0,#2
        LDR      r1,|L1.1972|
        STRB     r0,[r1,#0]
        LSLS     r0,r0,#23
        LDR      r1,|L1.2004|
        STR      r0,[r1,#0]
        LDR      r0,|L1.2000|
        LDRH     r0,[r0,#0]
        ORR      r0,r0,#4
        LDR      r1,|L1.2000|
        STRH     r0,[r1,#0]
|L1.1872|
        MOVS     r0,#0
        POP      {r4-r8,pc}
        ENDP

DATA_TraProc PROC
        PUSH     {r4-r6,lr}
        MOV      r6,r0
        MOV      r4,r1
        MOV      r5,r2
        MOV      r1,r5
        MOV      r0,r6
        BL       TXdata_proc
        STRH     r0,[r4,#0]
        LDR      r0,|L1.1988|
        LDRB     r0,[r0,#0]  ; U1_TXfin
        ORR      r0,r0,#4
        LDR      r1,|L1.1988|
        STRB     r0,[r1,#0]
        LDR      r0,|L1.1980|
        LDRH     r0,[r0,#0]
        MOV      r1,#0xfffe
        ANDS     r0,r0,r1
        LDR      r1,|L1.1980|
        STRH     r0,[r1,#0]
        LDR      r0,|L1.1984|
        LDRB     r0,[r0,#0]  ; Systimememb
        ORR      r0,r0,#2
        LDR      r1,|L1.1984|
        STRB     r0,[r1,#0]
        LDR      r0,|L1.1980|
        LDRH     r0,[r0,#0]
        ORR      r0,r0,#1
        LDR      r1,|L1.1980|
        STRH     r0,[r1,#0]
        BL       USART1_Send
        MOVS     r0,#0
        POP      {r4-r6,pc}
        ENDP

        DCW      0x0000
|L1.1956|
        DCD      cal_flag
|L1.1960|
        DCD      0x0801f800
|L1.1964|
        DCD      errornum
|L1.1968|
        DCD      Head_Data
|L1.1972|
        DCD      U1_RXfin
|L1.1976|
        DCD      COMMbreaktime
|L1.1980|
        DCD      0x40012c0c
|L1.1984|
        DCD      Systimememb
|L1.1988|
        DCD      U1_TXfin
|L1.1992|
        DCD      U1_TXresettime
|L1.1996|
        DCD      TXtimememb
|L1.2000|
        DCD      0x4001380c
|L1.2004|
        DCD      0x40010810

        AREA ||.arm_vfe_header||, DATA, READONLY, NOALLOC, ALIGN=2

        DCD      0x00000000

        AREA ||.data||, DATA, ALIGN=1

cal_flag
        DCB      0x00
errornum
        DCB      0x00
Head_Data
        DCB      0x00,0x00
        DCDU     0x00000000
        DCB      0x00,0x00

        EXPORT DATA_RecProc [CODE]
        EXPORT DATA_TraProc [CODE]

        IMPORT ||Lib$$Request$$armlib|| [CODE,WEAK]
        IMPORT CRC16_CAL [CODE]
        IMPORT Flash_Pagedata_Write [CODE]
        IMPORT U1_RXfin [DATA]
        IMPORT COMMbreaktime [DATA]
        IMPORT Systimememb [DATA]
        IMPORT U1_TXfin [DATA]
        IMPORT U1_TXresettime [DATA]
        IMPORT TXtimememb [DATA]
        IMPORT USART1_Send [CODE]

        KEEP bigenddata_copy
        KEEP TXdata_proc
        KEEP limitdatapro
        KEEP caldatapro
        KEEP cmddatapro
        KEEP RXdata_proc
        KEEP RXdata_confirm
        KEEP cal_flag
        KEEP errornum
        KEEP Head_Data

        ATTR FILESCOPE
        ATTR SETVALUE Tag_ABI_PCS_wchar_t,2
        ATTR SETVALUE Tag_ABI_enum_size,1
        ATTR SETVALUE Tag_ABI_optimization_goals,6
        ATTR SETSTRING Tag_conformance,"2.06"
        ATTR SETVALUE AV,18,1

        ASSERT {ENDIAN} = "little"
        ASSERT {INTER} = {TRUE}
        ASSERT {ROPI} = {FALSE}
        ASSERT {RWPI} = {FALSE}
        ASSERT {IEEE_FULL} = {FALSE}
        ASSERT {IEEE_PART} = {FALSE}
        ASSERT {IEEE_JAVA} = {FALSE}
        END
